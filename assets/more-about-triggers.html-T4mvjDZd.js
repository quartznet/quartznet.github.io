import{_ as n,o as e,c as s,e as a}from"./app-D5nNabMk.js";const t={},i=a(`<h1 id="more-about-triggers" tabindex="-1"><a class="header-anchor" href="#more-about-triggers"><span>More About Triggers</span></a></h1><p>Like jobs, triggers are relatively easy to work with, but do contain a variety of customizable options that you need to be aware of and understand before you can make full use of Quartz.NET. Also, as noted earlier, there are different types of triggers, that you can select to meet different scheduling needs.</p><h2 id="common-trigger-attributes" tabindex="-1"><a class="header-anchor" href="#common-trigger-attributes"><span>Common Trigger Attributes</span></a></h2><p>Aside from the fact that all trigger types have <code>TriggerKey</code> properties for tracking their identities, there are a number of other properties that are common to all trigger types. These common properties are set using the TriggerBuilder when you are building the trigger definition (examples of that will follow).</p><p>Here is a listing of properties common to all trigger types:</p><ul><li>The <code>JobKey</code> property indicates the identity of the job that should be executed when the trigger fires.</li><li>The <code>StartTimeUtc</code> property indicates when the trigger&#39;s schedule first comes into affect. The value is a DateTimeOffset object that defines a moment in time on a given calendar date. For some trigger types, the trigger will actually fire at the start time, for others it simply marks the time that the schedule should start being followed. This means you can store a trigger with a schedule such as &quot;every 5th day of the month&quot; during January, and if the StartTimeUtc property is set to April 1st, it will be a few months before the first firing.</li><li>The <code>EndTimeUtc</code> property indicates when the trigger&#39;s schedule should no longer be in effect. In other words, a trigger with a schedule of &quot;every 5th day of the month&quot; and with an end time of July 1st will fire for it&#39;s last time on June 5th.</li></ul><p>Other properties, which take a bit more explanation are discussed in the following sub-sections.</p><h2 id="priority" tabindex="-1"><a class="header-anchor" href="#priority"><span>Priority</span></a></h2><p>Sometimes, when you have many Triggers (or few worker threads in your Quartz.NET thread pool), Quartz.NET may not have enough resources to immediately fire all of the Triggers that are scheduled to fire at the same time. In this case, you may want to control which of your Triggers get first crack at the available Quartz.NET worker threads. For this purpose, you can set the priority property on a Trigger. If N Triggers are to fire at the same time, but there are only Z worker threads currently available, then the first Z Triggers with the highest priority will be executed first. If you do not set a priority on a Trigger, then it will use the default priority of 5. Any integer value is allowed for priority, positive or negative. A larger number indicates a higher priority. i.e. A trigger with a Priority of 7 will have priority over trigger with a value of 5.</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>Priorities are only compared when triggers have the same fire time. A trigger scheduled to fire at 10:59 will always fire before one scheduled to fire at 11:00.</p></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>When a trigger&#39;s job is detected to require recovery, its recovery is scheduled with the same priority as the original trigger.</p></div><h2 id="misfire-instructions" tabindex="-1"><a class="header-anchor" href="#misfire-instructions"><span>Misfire Instructions</span></a></h2><p>Another important property of a Trigger is its &quot;misfire instruction&quot;. A misfire occurs if a persistent trigger &quot;misses&quot; its firing time because of the scheduler being shutdown, or because there are no available threads in Quartz.NET&#39;s thread pool for executing the job. The different trigger types have different misfire instructions available to them. By default they use a &#39;smart policy&#39; instruction - which has dynamic behavior based on trigger type and configuration. When the scheduler starts, it searches for any persistent triggers that have misfired, and it then updates each of them based on their individually configured misfire instructions. When you start using Quartz.NET in your own projects, you should make yourself familiar with the misfire instructions that are defined on the given trigger types, and explained in their API documentation. More specific information about misfire instructions will be given within the tutorial lessons specific to each trigger type.</p><h2 id="calendars" tabindex="-1"><a class="header-anchor" href="#calendars"><span>Calendars</span></a></h2><p>Quartz.NET Calendar objects implementing <code>ICalendar</code> interface can be associated with triggers at the time the trigger is stored in the scheduler. Calendars are useful for excluding blocks of time from the trigger&#39;s firing schedule. For instance, you could create a trigger that fires a job every weekday at 9:30 am, but then add a Calendar that excludes all of the business&#39;s holidays.</p><p>Calendar&#39;s can be any serializable objects that implement the ICalendar interface, which looks like this:</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code><span class="token keyword">namespace</span> <span class="token namespace">Quartz</span>
<span class="token punctuation">{</span>
 <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ICalendar</span>
 <span class="token punctuation">{</span>
  <span class="token return-type class-name"><span class="token keyword">string</span></span> Description <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

  <span class="token return-type class-name">ICalendar</span> CalendarBase <span class="token punctuation">{</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

  <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">IsTimeIncluded</span><span class="token punctuation">(</span><span class="token class-name">DateTimeOffset</span> timeUtc<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token return-type class-name">DateTime</span> <span class="token function">GetNextIncludedTimeUtc</span><span class="token punctuation">(</span><span class="token class-name">DateTimeOffset</span> timeUtc<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token return-type class-name">ICalendar</span> <span class="token function">Clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Even though calendars can &#39;block out&#39; sections of time as narrow as a millisecond, most likely, you&#39;ll be interested in &#39;blocking-out&#39; entire days. As a convenience, Quartz.NET includes the class HolidayCalendar, which does just that.</p><p>Calendars must be instantiated and registered with the scheduler via the <code>AddCalendar(..)</code> method. If you use <code>HolidayCalendar</code>, after instantiating it, you should use its <code>AddExcludedDate(DateTime date)</code> method in order to populate it with the days you wish to have excluded from scheduling. The same calendar instance can be used with multiple triggers such as this:</p><p><strong>Calendar Example</strong></p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>    <span class="token class-name">HolidayCalendar</span> cal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HolidayCalendar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cal<span class="token punctuation">.</span><span class="token function">AddExcludedDate</span><span class="token punctuation">(</span>someDate<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">await</span> sched<span class="token punctuation">.</span><span class="token function">AddCalendar</span><span class="token punctuation">(</span><span class="token string">&quot;myHolidays&quot;</span><span class="token punctuation">,</span> cal<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
 <span class="token class-name">ITrigger</span> t <span class="token operator">=</span> TriggerBuilder<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">WithIdentity</span><span class="token punctuation">(</span><span class="token string">&quot;myTrigger&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">ForJob</span><span class="token punctuation">(</span><span class="token string">&quot;myJob&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">WithSchedule</span><span class="token punctuation">(</span>CronScheduleBuilder<span class="token punctuation">.</span><span class="token function">DailyAtHourAndMinute</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// execute job daily at 9:30</span>
  <span class="token punctuation">.</span><span class="token function">ModifiedByCalendar</span><span class="token punctuation">(</span><span class="token string">&quot;myHolidays&quot;</span><span class="token punctuation">)</span> <span class="token comment">// but not on holidays</span>
  <span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment">// .. schedule job with trigger</span>

 <span class="token class-name">ITrigger</span> t2 <span class="token operator">=</span> TriggerBuilder<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">WithIdentity</span><span class="token punctuation">(</span><span class="token string">&quot;myTrigger2&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">ForJob</span><span class="token punctuation">(</span><span class="token string">&quot;myJob2&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">WithSchedule</span><span class="token punctuation">(</span>CronScheduleBuilder<span class="token punctuation">.</span><span class="token function">DailyAtHourAndMinute</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// execute job daily at 11:30</span>
  <span class="token punctuation">.</span><span class="token function">ModifiedByCalendar</span><span class="token punctuation">(</span><span class="token string">&quot;myHolidays&quot;</span><span class="token punctuation">)</span> <span class="token comment">// but not on holidays</span>
  <span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// .. schedule job with trigger2 </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The details of the construction/building of triggers will be given in the next couple lessons. For now, just believe that the code above creates two triggers, each scheduled to fire daily. However, any of the firings that would have occurred during the period excluded by the calendar will be skipped.</p><p>See the Quartz.Impl.Calendar namespace for a number of ICalendar implementations that may suit your needs.</p>`,23),o=[i];function r(c,l){return e(),s("div",null,o)}const u=n(t,[["render",r],["__file","more-about-triggers.html.vue"]]),d=JSON.parse('{"path":"/documentation/quartz-4.x/tutorial/more-about-triggers.html","title":"More About Triggers","lang":"en-US","frontmatter":{"title":"More About Triggers"},"headers":[{"level":2,"title":"Common Trigger Attributes","slug":"common-trigger-attributes","link":"#common-trigger-attributes","children":[]},{"level":2,"title":"Priority","slug":"priority","link":"#priority","children":[]},{"level":2,"title":"Misfire Instructions","slug":"misfire-instructions","link":"#misfire-instructions","children":[]},{"level":2,"title":"Calendars","slug":"calendars","link":"#calendars","children":[]}],"git":{"updatedTime":1771443994000,"contributors":[{"name":"Copilot","email":"198982749+Copilot@users.noreply.github.com","commits":1}]},"filePathRelative":"documentation/quartz-4.x/tutorial/more-about-triggers.md"}');export{u as comp,d as data};
